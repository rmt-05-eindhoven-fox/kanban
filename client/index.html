<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Client ID -->
  <meta name="google-signin-client_id" content="347714341093-c0bqlieo0hp32k7e4mkhinqlb3m5m034.apps.googleusercontent.com">

  <!-- Bootstrap & CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">

  <!-- FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">

  <!-- FONTAWESOME -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous" />

  <title>KhanBhanBhoard</title>
</head>

<body>

  <div id="app">
    <!-- NAVBAR LANDING PAGE -->
    <section v-if="default_page === 'login-page' || default_page === 'register-page'" id="navbar-landingpage">
      <div class="container-fluid navbar d-flex navbar-dark text-light p-2">
        <div class="logo">
          <nav>
            <a class="navbar-brand" href="#">
              <img :src="icon_logo" width="30" height="30" class="icon-logo d-inline-block align-top" alt="kanban-icon" loading="lazy">
              {{ app_name }}
            </a>
          </nav>
        </div>
      </div>
    </section>
    <!-- NAVBAR LANDING PAGE -->

    <!-- NAVBAR HOME PAGE -->
    <section v-if="default_page === 'home-page'" id="navbar-homepage">
      <div class="container-fluid navbar d-flex navbar-dark text-light p-2">
        <div class="logo">
          <nav>
            <a class="navbar-brand" href="#">
              <img :src="icon_logo" width="30" height="30" class="icon-logo d-inline-block align-top" alt="kanban-icon" loading="lazy">
              {{ app_name }}
            </a>
          </nav>
        </div>
        <div class="d-flex align-items-center logout">
          <div id="user-login" class="mr-4">
            <span class="rainbow">Hello! {{ login_user }}</span>
          </div>
          <button @click="logout()" type="button" class="btn btn-danger">Logout</button>
        </div>
      </div>
    </section>
    <!-- NAVBAR HOME PAGE -->

    <!-- LOGIN PAGE -->
    <section v-if="default_page === 'login-page'" class="container mt-5 pt-5" id="login-page">
      <div class="row mt-5">
        <div class="col-sm-9 col-md-7 col-lg-5 m-auto">
          <div class="card card-login">
            <div class="card-body text-light">
              <h5 class="card-title text-center">LOGIN</h5>
              <form @submit.prevent="login()" class="form-login">
                <div class="form-group">
                  <label for="email-login">Email Address</label>
                  <input v-model:value="email_login" type="email" id="email-login" class="form-control rounded-pill p-4" placeholder="Email address" required autofocus>
                </div>
                <div class="form-group">
                  <label for="password-login">Password</label>
                  <input v-model:value="password_login" type="password" id="password-login" class="form-control rounded-pill p-4" placeholder="Password" required autofocus>
                </div>
                <div class="form-group">
                  <label for="remember">
                    <input v-model:value="remember" type="checkbox" id="remember" name="remember" class="mr-2"> Remember Me
                  </label>
                </div>
                <hr class="bg-light">
                <button class="btn btn-lg btn-primary btn-block mt-4 p-2 rounded-pill" type="submit">LOGIN</button>
                <hr class="bg-light my-4">
                <small class="form-text text-center mb-4">Sign in with your google account</small>
                <div class="row justify-content-center">
                  <div class="g-signin2" data-onsuccess="onSignIn"></div>
                </div>
              </form><br>
              <small class="form-text text-center">Don't have an account yet?<a href="#" @click.prevent="changePage('register-page')" class="text-warning"> Register now!</a></small>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="container text-center text-light mb-3 pr-5" style="position: absolute; bottom: 0;">
          © 2020 KhanBhanBhoard by Bobby Septianto
        </div>
      </div>
    </section>
    <!-- LOGIN PAGE -->

    <!-- REGISTER PAGE -->
    <section v-else-if="default_page === 'register-page'" class="container mt-5 pt-5" id="register-page">
      <div class="row mt-5 pt-5">
        <div class="col-sm-9 col-md-7 col-lg-5 m-auto">
          <div class="card card-login">
            <div class="card-body text-light">
              <h5 class="card-title text-center">REGISTER</h5>
              <form @submit.prevent="register()" class="form-login">
                <div class="form-group">
                  <label for="email-register">Email Address</label>
                  <input v-model:value="email_register" type="email" id="email-register" class="form-control rounded-pill p-4" placeholder="Email address" required autofocus>
                </div>
                <div class="form-group">
                  <label for="password-register">Password</label>
                  <input v-model:value="password_register" type="password" id="password-register" class="form-control rounded-pill p-4" placeholder="Password" required autofocus>
                </div>
                <hr class="bg-light my-4">
                <button class="btn btn-lg btn-primary btn-block mt-4 p-2 rounded-pill" type="submit">REGISTER</button>
                <hr class="bg-light my-4">
              </form>
              <small class="form-text text-center">Back to<a href="#" @click.prevent="changePage('login-page')" class="text-warning"> Login!</a></small>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="container text-center text-light mb-3 pr-5" style="position: absolute; bottom: 0;">
          © 2020 KhanBhanBhoard by Bobby Septianto
        </div>
      </div>
    </section>
    <!-- REGISTER PAGE -->

    <!-- HOME PAGE -->
    <section v-else-if="default_page === 'home-page'" id="home-page">
      <div class="board container-fluid pt-3">
        <div class="col col-add d-flex flex-column align-items-center">
          <div v-show="!addNewTaskForm" class="row pb-2">
            <button @click="showAddNewTaskForm()" class="btn btn-primary"><i class="fas fa-plus"></i> Add New Task</button>
          </div>
          <!-- ADD FORM -->
          <div v-show="addNewTaskForm" class="col-md-8 pb-2">
            <div class="card text-light">
              <div class="card-body add-form">
                <form @submit.prevent="addNewTask()">
                  <div class="form-row">
                    <div class="col-sm">
                      <div class="form-group">
                        <input v-model:value="new_task.title" type="text" class="form-control" id="title-task" placeholder="-- Title --">
                      </div>
                    </div>
                    <div class="col-sm">
                      <div class="form-group">
                        <input v-model:value="new_task.description" type="text" class="form-control" id="desc-task" placeholder="-- Description --">
                      </div>
                    </div>
                    <div class="col-sm">
                      <div class="form-group">
                        <select v-model:value="new_task.category" id="status-task" class="form-control">
                          <option value="">-- Select --</option>
                          <option value="Backlog">Backlog</option>
                          <option value="Todo">Todo</option>
                          <option value="Doing">Doing</option>
                          <option value="Done">Done</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="col-sm">
                      <div class="text-center">
                        <button type="submit" class="btn btn-sm btn-success">ADD</button>
                        <button @click="closeAddNewTaskForm()" class="btn btn-sm btn-danger">CANCEL</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <!-- ADD FORM -->
          <!-- EDIT FORM -->
          <div v-show="editTaskForm" class="col-md-6 pb-2">
            <div class="card text-light">
              <div class="card-body add-form">
                <form @submit.prevent="editTask()">
                  <div class="form-row">
                    <div class="col-sm">
                      <div class="form-group">
                        <input v-model:value="edit_task.title" type="text" class="form-control" id="title-task" placeholder="-- Title --">
                      </div>
                    </div>
                    <div class="col-sm">
                      <div class="form-group">
                        <input v-model:value="edit_task.description" type="text" class="form-control" id="desc-task" placeholder="-- Description --">
                      </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="col-sm">
                      <div class="text-center">
                        <button type="submit" class="btn btn-sm btn-success">EDIT</button>
                        <button @click="closeEditTaskForm()" class="btn btn-sm btn-danger">CANCEL</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <!-- EDIT FORM -->
          <!-- CATEGORY FORM -->
          <div v-show="moveTaskForm" class="">
            <div class="card text-light">
              <div class="card-body add-form">
                <form @submit.prevent="moveTask()">
                  <div class="row btn-group">
                    <label class="btn btn-danger px-5">
                      <input v-model="move_task.category" value="Backlog" type="radio" name="category" id="move-backlog"> Backlog
                    </label>
                    <label class="btn btn-warning px-5">
                      <input v-model="move_task.category" value="Todo" type="radio" name="category" id="move-todo"> Todo
                    </label>
                    <label class="btn btn-primary px-5">
                      <input v-model="move_task.category" value="Doing" type="radio" name="category" id="move-doing"> Doing
                    </label>
                    <label class="btn btn-success px-5">
                      <input v-model="move_task.category" value="Done" type="radio" name="category" id="move-done"> Done
                    </label>
                  </div>
                  <div class="form-row">
                    <div class="col-sm">
                      <div class="text-center">
                        <button type="submit" class="btn btn-sm btn-success">MOVE</button>
                        <button @click="closeMoveTaskForm()" class="btn btn-sm btn-danger">CANCEL</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <!-- CATEGORY FORM -->
        </div>
        <!-- TASK -->
        <div class="row row-task">
          <div class="col-md-3 pt-2">
            <h3 class="text-center border border-danger text-light rounded-pill font-weight-bold">BACKLOG</h3>
            <div id="task-backlog" class="backlog px-2 pt-3 pb-2 rounded overflow">
              <div v-for="(task, i) in backlogs" :key="i" class="shadow-lg card mb-2">
                <div class="card-header p-2 d-flex justify-content-between">
                  {{ task.title }}
                  <i class="fas fa-square" style="color: red;"></i>
                </div>
                <div class="card-body p-2">
                  <p class="card-text text-justify">{{ task.description }}</p>
                  <div class="row px-3 d-flex justify-content-between">
                    <div>
                      <a href="#" @click.prevent="showEditTaskForm(task.id, task.title, task.description)" class="btn btn-info btn-sm"><i class="fas fa-edit"></i></a>
                      <a href="#" @click.prevent="deleteTask(task.id)" class="btn btn-danger btn-sm"><i class="far fa-trash-alt"></i></a>
                      <a href="#" @click.prevent="showMoveTaskForm(task.id, task.category)" class="btn btn-success btn-sm"><i class="fas fa-arrows-alt"></i></a>
                    </div>
                    <div class="pt-1">
                      <i class="far fa-user"></i> {{ task.User.email }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3 pt-2">
            <h3 class="text-center border border-warning text-light rounded-pill font-weight-bold">Todo</h3>
            <div id="task-todo" class="todo px-2 pt-3 pb-2 rounded overflow">
              <div v-for="(task, i) in todos" :key="i" class="shadow-lg card mb-2">
                <div class="card-header p-2 d-flex justify-content-between">
                    {{ task.title }}
                    <i class="fas fa-square" style="color: yellow;"></i>
                </div>
                <div class="card-body p-2">
                  <p class="card-text text-justify">{{ task.description }}</p>
                  <div class="row px-3 d-flex justify-content-between">
                    <div>
                      <a href="#" @click.prevent="showEditTaskForm(task.id, task.title, task.description)" class="btn btn-info btn-sm"><i class="fas fa-edit"></i></a>
                      <a href="#" @click.prevent="deleteTask(task.id)" class="btn btn-danger btn-sm"><i class="far fa-trash-alt"></i></a>
                      <a href="#" @click.prevent="showMoveTaskForm(task.id, task.category)" class="btn btn-success btn-sm"><i class="fas fa-arrows-alt"></i></a>
                    </div>
                    <div class="pt-1">
                      <i class="far fa-user"></i> {{ task.User.email }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3 pt-2">
            <h3 class="text-center border border-primary text-light rounded-pill font-weight-bold">DOING</h3>
            <div id="task-doing" class="doing px-2 pt-3 pb-2 rounded overflow">
              <div v-for="(task, i) in doings" :key="i" class="shadow-lg card mb-2">
                <div class="card-header p-2 d-flex justify-content-between">
                    {{ task.title }}
                    <i class="fas fa-square" style="color: cyan;"></i>
                </div>
                <div class="card-body p-2">
                  <p class="card-text text-justify">{{ task.description }}</p>
                  <div class="row px-3 d-flex justify-content-between">
                    <div>
                      <a href="#" @click.prevent="showEditTaskForm(task.id, task.title, task.description)" class="btn btn-info btn-sm"><i class="fas fa-edit"></i></a>
                      <a href="#" @click.prevent="deleteTask(task.id)" class="btn btn-danger btn-sm"><i class="far fa-trash-alt"></i></a>
                      <a href="#" @click.prevent="showMoveTaskForm(task.id, task.category)" class="btn btn-success btn-sm"><i class="fas fa-arrows-alt"></i></a>
                    </div>
                    <div class="pt-1">
                      <i class="far fa-user"></i> {{ task.User.email }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3 pt-2">
            <h3 class="text-center border border-success text-light rounded-pill font-weight-bold">DONE</h3>
            <div id="task-done" class="done px-2 pt-3 pb-2 rounded overflow">
              <div v-for="(task, i) in dones" :key="i" class="shadow-lg card mb-2">
                <div class="card-header p-2 d-flex justify-content-between">
                    {{ task.title }}
                    <i class="fas fa-square" style="color: greenyellow;"></i>
                </div>
                <div class="card-body p-2">
                  <p class="card-text text-justify">{{ task.description }}</p>
                  <div class="row px-3 d-flex justify-content-between">
                    <div>
                      <a href="#" @click.prevent="showEditTaskForm(task.id, task.title, task.description)" class="btn btn-info btn-sm"><i class="fas fa-edit"></i></a>
                      <a href="#" @click.prevent="deleteTask(task.id)" class="btn btn-danger btn-sm"><i class="far fa-trash-alt"></i></a>
                      <a href="#" @click.prevent="showMoveTaskForm(task.id, task.category)" class="btn btn-success btn-sm"><i class="fas fa-arrows-alt"></i></a>
                    </div>
                    <div class="pt-1">
                      <i class="far fa-user"></i> {{ task.User.email }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- TASK -->
      </div>
      <div class="footer footer-copyright text-light text-center mt-4">
        © 2020 KhanBhanBhoard by Bobby Septianto
      </div>
    </section>
    <!-- HOME PAGE -->
  </div>

  <!-- SCRIPT -->
  <!-- jQuery and JS bundle w/ Popper.js -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <!-- Vue.JS -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
  <!-- Axios -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <!-- Google OAuth -->
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <script src="index.js"></script>
  <!-- SCRIPT -->
</body>

</html>